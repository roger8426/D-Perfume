import{_ as m,m as f,a as b,b as _,r as w,o as d,c as n,e as g,d as t,t as c,k as y,v,f as L,i as l,F as x,h as k}from"./index-e3b22acb.js";import{w as p,c as C}from"./cart-8bb9b1e8.js";const N={data(){return{product:{},id:"",qty:1,isLoading:!1,btnLoading:!1,wishbtn:!1}},computed:{...f(p,["wishList"]),...b(C,["cartNum"])},methods:{getProduct(){this.isLoading=!0;const i=`https://vue3-course-api.hexschool.io/api/roger8426-api/product/${this.id}`;this.$http.get(i).then(s=>{s.data.success&&(this.product=s.data.product),this.isLoading=!1})},addCart(){const i="https://vue3-course-api.hexschool.io/api/roger8426-api/cart",s={product_id:this.id,qty:this.qty};this.btnLoading=!0,this.$http.post(i,{data:s}).then(h=>{h.data.success&&this.$http.get(i).then(r=>{r.data.success&&(this.cartNum=r.data.data.carts.length,this.btnLoading=!1)})})},addWish(){this.wishList.push(this.product),window.localStorage.setItem("wishList",JSON.stringify(this.tempWishList)),this.wishCheck()},wishCheck(){this.wishList.find(i=>{i.id===this.id&&(this.wishbtn=!0)})},..._(p,["wishListUpdate"])},created(){this.id=this.$route.params.productId,this.getProduct(),this.wishCheck()}},S={class:"container px-0 mt-6 mb-6"},V={class:"row productInfo"},q={class:"col-8 px-0"},W=["src"],I={class:"col-4 ps-4 pe-0 d-flex flex-column justify-content-center"},$={class:"fw-bold"},B={class:"d-flex"},P={key:0,class:"spinner-border spinner-border-sm text-dark me-1",role:"status"},T=t("span",{class:"visually-hidden"},"Loading...",-1),U=[T],D={key:0,type:"button",class:"btn text-primary p-0 mt-3 me-2 w-50 border-0",disabled:""},F=t("i",{class:"bi bi-heart-fill me-1"},null,-1),j=t("i",{class:"bi bi-heart-fill me-1"},null,-1),A=k('<div class="d-flex flex-column mt-6"><h3 class="fs-5 fw-bold">商品購買須知</h3><p class="fs-5">商品情境照為示意用，不包含其他配件，商品外觀以廠商實際出貨為主。任何訂單變動均會在出貨訊息內更新。</p><h3 class="fs-5 fw-bold">退換貨須知</h3><p class="fs-5">依《消費者保護法》規定，全站購物皆享有【七日猶豫期】（含例假日）之權益。若商品有任何問題，可於猶豫期內申請退貨。</p></div>',1);function E(i,s,h,r,e,a){const u=w("LoadingView");return d(),n(x,null,[g(u,{active:e.isLoading},null,8,["active"]),t("div",S,[t("div",V,[t("div",q,[t("img",{src:e.product.imageUrl,alt:"",class:"w-100"},null,8,W)]),t("div",I,[t("div",null,[t("h2",$,c(e.product.title),1),t("p",null,c(e.product.description),1),t("p",null,c(`NT$${i.$filters.currency(e.product.price)}`),1)]),t("div",B,[y(t("input",{type:"number",class:"border-primary border-1 rounded-0 rounded-start py-3 ps-4 w-50",min:"1","onUpdate:modelValue":s[0]||(s[0]=o=>e.qty=o),oninput:"this.value=this.value.replace(/[^0-9.]+/g,'');"},null,512),[[v,e.qty]]),t("button",{type:"button",class:"btn btn-primary p-0 rounded-0 rounded-end py-3 w-50",onClick:s[1]||(s[1]=(...o)=>a.addCart&&a.addCart(...o))},[this.btnLoading?(d(),n("div",P,U)):L("",!0),l(" 加入購物車 ")])]),t("div",null,[e.wishbtn?(d(),n("button",D,[F,l(" 已在願望清單中 ")])):(d(),n("button",{key:1,type:"button",class:"btn text-primary p-0 mt-3 me-2 w-50",onClick:s[2]||(s[2]=(...o)=>a.addWish&&a.addWish(...o))},[j,l(" 加入願望清單 ")]))]),A])])])],64)}const O=m(N,[["render",E]]);export{O as default};
